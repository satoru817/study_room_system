(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,n)=>{t.exports=e.r(76562)},44334,e=>{"use strict";e.s(["checkMe",()=>s,"doGet",()=>r,"doLogin",()=>i,"doPost",()=>o,"getCsrfToken",()=>a],44334);let t=()=>(e=>{if(!document||!document.cookie)return null;for(let t of document.cookie.split(";").map(e=>e.trim()))if(t.startsWith(e+"="))return decodeURIComponent(t.substring(e.length+1));return null})("XSRF-TOKEN"),n=async(e,n,o=null,r)=>{let i=t(),s=o?JSON.stringify(o):null;console.log(`Fetch initialized with url = ${e}, data = ${s}, method = ${n}`);let a={method:n,credentials:"include",headers:{"Content-Type":"application/json",...i&&{"X-XSRF-TOKEN":i}}};"POST"===n&&s&&(a.body=s);try{let t,o=await fetch(e,a);if(401===o.status)throw console.error("Authentication required - redirecting to login"),alert("ログインが必要です。ログインページにリダイレクトします。"),window.location.href="/login",Error("Authentication required");if(403===o.status)throw console.error("Access forbidden - insufficient permissions"),alert("アクセス権限がありません。"),Error("Access forbidden");if(!o.ok)throw Error(`Response Status: ${o.status}`);let r=o.headers.get("Content-Type")||"";if(204===o.status||""===r)return console.log(`Fetch finished with url = ${e}, method = ${n} (No Content)`),null;return t=r.includes("text/plain")?await o.text():r.includes("application/json")?await o.json():await o.text(),console.log(`Fetch finished with url = ${e}, fetchedData = ${JSON.stringify(t)}, method = ${n}`),t}catch(e){throw console.error(`Error: ${e}`),e instanceof Error&&!e.message.includes("Authentication")&&!e.message.includes("forbidden")&&alert(`エラー発生：必要であれば管理者に連絡してください。${e}`),r&&r(),e}};async function o(e,t){return await n(e,"POST",t)}async function r(e){return await n(e,"GET")}async function i(e,n){let o=t();console.log(`CSRF = ${o}`);let r=new URLSearchParams;r.append("username",e),r.append("password",n),r.append("_csrf",o),console.log(`Login initialized with username = ${e}`);try{let e=await fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded",...o&&{"X-XSRF-TOKEN":o}},body:r.toString()});if(!e.ok)throw Error(`Response Status: ${e.status}`);let t=await e.json();return console.log(`Login finished, result = ${JSON.stringify(t)}`),t}catch(e){throw console.error(`Login Error: ${e}`),e}}async function s(){return await r("/api/me")}let a=async()=>await r("/api/csrf-token")},18410,e=>{"use strict";var t=e.i(43476),n=e.i(71645),o=e.i(18566),r=e.i(44334);function i(){let e=(0,o.useRouter)(),[i,s]=(0,n.useState)(null),[a,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{c(await (0,r.doGet)("/api/cramschool/get"))})()},[]),(0,t.jsx)("div",{className:"container mt-5",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,t.jsx)("h4",{className:"mb-0",children:"校舎選択"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(i){let t=a.find(e=>e.cramSchoolId===i);t&&e.push(`/teacher-dashboard/cramschool/?cramSchoolId=${encodeURIComponent(i)}&name=${encodeURIComponent(t.name)}`)}else alert("校舎を選択してください")},disabled:!i,children:"Go"})]}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"list-group",children:a.map(e=>(0,t.jsx)("button",{type:"button",className:`list-group-item list-group-item-action ${i===e.cramSchoolId?"active":""}`,onClick:()=>s(e.cramSchoolId),children:e.name},e.cramSchoolId))}),0===a.length&&(0,t.jsx)("p",{className:"text-center text-muted mt-3",children:"読み込み中..."})]})]})})})})}e.s(["default",()=>i])}]);